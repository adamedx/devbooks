<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="wppfaq_files/filelist.xml">
<link rel=Edit-Time-Data href="wppfaq_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Larry's FAQ list for triaging security related issues</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="PostalCode"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="City"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>lzhu</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Liqiang(Larry) Zhu</o:LastAuthor>
  <o:Revision>94</o:Revision>
  <o:TotalTime>181</o:TotalTime>
  <o:Created>2003-06-14T03:08:00Z</o:Created>
  <o:LastSaved>2006-10-04T19:02:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2637</o:Words>
  <o:Characters>15031</o:Characters>
  <o:Company>Microsoft Corporation</o:Company>
  <o:Lines>125</o:Lines>
  <o:Paragraphs>35</o:Paragraphs>
  <o:CharactersWithSpaces>17633</o:CharactersWithSpaces>
  <o:Version>11.8036</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>120</w:Zoom>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
    {font-family:SimSun;
    panose-1:2 1 6 0 3 1 1 1 1 1;
    mso-font-alt:\5B8B\4F53;
    mso-font-charset:134;
    mso-generic-font-family:auto;
    mso-font-pitch:variable;
    mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
    {font-family:"\@SimSun";
    panose-1:2 1 6 0 3 1 1 1 1 1;
    mso-font-charset:134;
    mso-generic-font-family:auto;
    mso-font-pitch:variable;
    mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
    {mso-style-parent:"";
    margin:0in;
    margin-bottom:.0001pt;
    mso-pagination:widow-orphan;
    font-size:12.0pt;
    font-family:"Times New Roman";
    mso-fareast-font-family:"Times New Roman";}
h1
    {mso-margin-top-alt:auto;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    mso-pagination:widow-orphan;
    mso-outline-level:1;
    font-size:24.0pt;
    font-family:"Times New Roman";
    mso-fareast-font-family:SimSun;
    font-weight:bold;}
h3
    {mso-margin-top-alt:auto;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    mso-pagination:widow-orphan;
    mso-outline-level:3;
    font-size:13.5pt;
    font-family:"Times New Roman";
    mso-fareast-font-family:SimSun;
    font-weight:bold;}
a:link, span.MsoHyperlink
    {color:blue;
    text-decoration:underline;
    text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
    {color:blue;
    text-decoration:underline;
    text-underline:single;}
p
    {mso-margin-top-alt:auto;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    mso-pagination:widow-orphan;
    font-size:12.0pt;
    font-family:"Times New Roman";
    mso-fareast-font-family:"Times New Roman";}
span.SpellE
    {mso-style-name:"";
    mso-spl-e:yes;}
span.GramE
    {mso-style-name:"";
    mso-gram-e:yes;}
@page Section1
    {size:8.5in 11.0in;
    margin:1.0in 1.25in 1.0in 1.25in;
    mso-header-margin:.5in;
    mso-footer-margin:.5in;
    mso-paper-source:0;}
div.Section1
    {page:Section1;}
 /* List Definitions */
 @list l0
    {mso-list-id:138346619;
    mso-list-template-ids:1513665544;}
@list l0:level1
    {mso-level-number-format:bullet;
    mso-level-text:\F0B7;
    mso-level-tab-stop:.5in;
    mso-level-number-position:left;
    text-indent:-.25in;
    mso-ansi-font-size:10.0pt;
    font-family:Symbol;}
@list l0:level2
    {mso-level-tab-stop:1.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level3
    {mso-level-tab-stop:1.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level4
    {mso-level-tab-stop:2.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level5
    {mso-level-tab-stop:2.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level6
    {mso-level-tab-stop:3.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level7
    {mso-level-tab-stop:3.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level8
    {mso-level-tab-stop:4.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l0:level9
    {mso-level-tab-stop:4.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1
    {mso-list-id:422723291;
    mso-list-template-ids:443981294;}
@list l1:level1
    {mso-level-number-format:bullet;
    mso-level-text:\F0B7;
    mso-level-tab-stop:.5in;
    mso-level-number-position:left;
    text-indent:-.25in;
    mso-ansi-font-size:10.0pt;
    font-family:Symbol;}
@list l1:level2
    {mso-level-tab-stop:1.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level3
    {mso-level-tab-stop:1.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level4
    {mso-level-tab-stop:2.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level5
    {mso-level-tab-stop:2.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level6
    {mso-level-tab-stop:3.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level7
    {mso-level-tab-stop:3.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level8
    {mso-level-tab-stop:4.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l1:level9
    {mso-level-tab-stop:4.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2
    {mso-list-id:1213883848;
    mso-list-template-ids:-862273810;}
@list l2:level1
    {mso-level-tab-stop:.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level2
    {mso-level-tab-stop:1.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level3
    {mso-level-tab-stop:1.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level4
    {mso-level-tab-stop:2.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level5
    {mso-level-tab-stop:2.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level6
    {mso-level-tab-stop:3.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level7
    {mso-level-tab-stop:3.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level8
    {mso-level-tab-stop:4.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l2:level9
    {mso-level-tab-stop:4.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3
    {mso-list-id:1559168597;
    mso-list-template-ids:510422156;}
@list l3:level1
    {mso-level-number-format:bullet;
    mso-level-text:\F0B7;
    mso-level-tab-stop:.5in;
    mso-level-number-position:left;
    text-indent:-.25in;
    mso-ansi-font-size:10.0pt;
    font-family:Symbol;}
@list l3:level2
    {mso-level-tab-stop:1.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level3
    {mso-level-tab-stop:1.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level4
    {mso-level-tab-stop:2.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level5
    {mso-level-tab-stop:2.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level6
    {mso-level-tab-stop:3.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level7
    {mso-level-tab-stop:3.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level8
    {mso-level-tab-stop:4.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l3:level9
    {mso-level-tab-stop:4.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4
    {mso-list-id:1637684417;
    mso-list-template-ids:-1185107664;}
@list l4:level1
    {mso-level-number-format:bullet;
    mso-level-text:\F0B7;
    mso-level-tab-stop:.5in;
    mso-level-number-position:left;
    text-indent:-.25in;
    mso-ansi-font-size:10.0pt;
    font-family:Symbol;}
@list l4:level2
    {mso-level-tab-stop:1.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level3
    {mso-level-tab-stop:1.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level4
    {mso-level-tab-stop:2.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level5
    {mso-level-tab-stop:2.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level6
    {mso-level-tab-stop:3.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level7
    {mso-level-tab-stop:3.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level8
    {mso-level-tab-stop:4.0in;
    mso-level-number-position:left;
    text-indent:-.25in;}
@list l4:level9
    {mso-level-tab-stop:4.5in;
    mso-level-number-position:left;
    text-indent:-.25in;}
ol
    {margin-bottom:0in;}
ul
    {margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
    {mso-style-name:"Table Normal";
    mso-tstyle-rowband-size:0;
    mso-tstyle-colband-size:0;
    mso-style-noshow:yes;
    mso-style-parent:"";
    mso-padding-alt:0in 5.4pt 0in 5.4pt;
    mso-para-margin:0in;
    mso-para-margin-bottom:.0001pt;
    mso-pagination:widow-orphan;
    font-size:10.0pt;
    font-family:"Times New Roman";
    mso-fareast-font-family:"Times New Roman";
    mso-ansi-language:#0400;
    mso-fareast-language:#0400;
    mso-bidi-language:#0400;}
</style>
<![endif]-->
<meta http-equiv=Content-Language content=en-us>
</head>

<body lang=EN-US link=blue vlink=blue style='tab-interval:.5in'>

<div class=Section1>

<p><!--webbot bot="PurpleText"
PREVIEW="Answers to Frequently Asked Questions - Add new questions at the end of the Table of Contents list. For each new question, create a new section where the heading contains the text of the question, followed by one or more paragraphs presenting the answer. Make a new bookmark for the heading by selecting the text and choosing the Insert Bookmark menu item. Then turn the new question into a hyperlink to this bookmark by selecting the text and choosing the Insert Hyperlink menu item."
--></p>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h1 align=center style='text-align:center'>Larry's FAQ for triaging security
related issues</h1>

<h3>Using Tracing Information in <st1:place w:st="on">Vista</st1:place></h3>

<ol start=1 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#How_do_I_start/stop_tracing">How do I start/stop tracing</a></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#How_do_I_include_file_name,_function_na">How do I include the
     symbolic names for the debugging flags, file name, function name, and line
     number information in a trace statement</a></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#what_are_the_meanings/symbolic_names_fo">What are the
     meanings/symbolic names for the debugging flags</a></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#Can_I_start/stop_tracing_remotely">Can I start/stop tracing
     remotely</a></li>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#Can_you_please_give_me_instructions_how">Can you please give me
     instructions how to decode the event trace log files</a></li>
</ol>

<h3>Cached Logon</h3>

<ol start=6 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#What_should_I_do_if__I_have_cached_logon">What should I do if&nbsp;
     I have cached logon issues</a></li>
</ol>

<h3>Tracing/Logging in Win2k/WinXP/WS2k3/Vista/LH Servers</h3>

<ol start=7 type=1>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l2 level1 lfo1;tab-stops:list .5in'><a
     href="#How_do_I_get_Negotiate_Netlogon_NTLM_ker">How do I enable
     tracing/logging for trouble shooting</a>?</li>
</ol>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3><a name="How_do_I_start/stop_tracing">1. How do I start/stop tracing</a></h3>

<p>To start tracing, you can use tracelog.exe (you can get tracelog.exe at <a
href="\\lzhudbg\temp\tools\tracelog.exe">\\lzhudbg\temp\tools\tracelog.exe</a>). Different
components use different control <span class=SpellE>GUIDs</span>:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l3 level1 lfo2;tab-stops:list .5in'>NTLM</li>
</ul>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>tracelog.exe -<span class=SpellE>kd</span> -<span
class=SpellE>rt</span> -start <span class=SpellE>ntlm</span> -<span
class=SpellE>guid</span> #5BBB6C18-AA45-49b1-A15F-085F7ED0AA90 -f .\<span
class=SpellE>ntlm.etl</span> -flags 0x15003 -ft 1</span></p>

</blockquote>

<p><span class=GramE>or</span> just run <a href="\\lzhudbg\temp\tools\tracing\startntlmtrace.cmd">\\lzhudbg\temp\tools\tracing\startntlmtrace.cmd</a><span
class=MsoHyperlink><o:p></o:p></span></p>

</blockquote>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'>Kerberos</li>
</ul>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>tracelog.exe -<span class=SpellE>kd</span> -<span
class=SpellE>rt</span> -start <span class=SpellE>kerb</span> -<span
class=SpellE>guid</span> #6B510852-3583-4e2d-AFFE-A67F9F223438 -f .\<span
class=SpellE>kerb.etl</span> -flags 0x43 -ft 1</span></p>

</blockquote>

<p><span class=GramE>or</span> just run <a href="\\lzhudbg\temp\tools\tracing\startkerbtrace.cmd">\\lzhudbg\temp\tools\tracing\startkerbtrace.cmd</a></p>

</blockquote>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo4;tab-stops:list .5in'>KDC</li>
</ul>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>tracelog.exe -<span class=SpellE>kd</span> -<span
class=SpellE>rt</span> -start <span class=SpellE>kdc</span> -<span
class=SpellE>guid</span> #1BBA8B19-7F31-43c0-9643-6E911F79A06B -f .\<span
class=SpellE>kdc.etl</span> -flags 0x803 -ft 1</span></p>

</blockquote>

<p><span class=GramE>or</span> just run<a href="\\lzhudbg\temp\tools\tracing\startkdctrace.cmd">\\lzhudbg\temp\tools\tracing\startkdctrace.cmd</a></p>

</blockquote>

<p>to stop tracing, just do <span class=SpellE>tracelog</span> -stop &lt;<span
class=SpellE>tracename</span>&gt;, for example, use &quot;<span class=SpellE>tracelog</span>
-stop <span class=SpellE>ntlm</span>&quot; to stop tracing for NTLM, if you
started the tracing using the instructions above or use the following
pre-prepared files:</p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l3 level1 lfo2;tab-stops:list .5in'>&nbsp;NTLM</li>
</ul>

<p><span style='mso-spacerun:yes'>      </span><span class=GramE>run</span> <a
href="stopntlmtrace.cmd">\\lzhudbg\temp\tools\tracing\stopntlmtrace.cmd</a><span
class=MsoHyperlink><o:p></o:p></span></p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l0 level1 lfo3;tab-stops:list .5in'>Kerberos</li>
</ul>

<p><span style='mso-spacerun:yes'>      </span><span class=GramE>run</span> <a
href="stopkerbtrace.cmd">\\lzhudbg\temp\tools\tracing\stopkerbtrace.cmd</a></p>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l1 level1 lfo4;tab-stops:list .5in'>KDC</li>
</ul>

<p><span style='mso-spacerun:yes'>      </span><span class=GramE>run</span><a
href="stopkdctrace.cmd">\\lzhudbg\temp\tools\tracing\stopkdctrace.cmd</a></p>

<p>Another way to start/stop tracing is to use registry values: please use
these pre-prepared registry files provided by the security team:</p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><a href="\\lzhudbg\temp\regs\ntlmtrace.reg">\\lzhudbg\temp\regs\ntlmtrace.reg&nbsp;</a>
for NTLM</p>

<p><a href="\\lzhudbg\temp\regs\kerbtrace.reg">\\lzhudbg\temp\regs\kerbtrace.reg&nbsp;</a>
for Kerberos,</p>

<p><a href="\\lzhudbg\temp\regs\kdctrace.reg">\\lzhudbg\temp\regs\kdctrace.reg&nbsp;</a>
for KDC</p>

</blockquote>

<p><b><span style='color:red'>Where are the log files: If you used the first
method (either using .<span class=SpellE>cmd</span> or using tracelog.exe),
look for the log file <span class=SpellE>kerb.etl/kdc.etl/ntlm.etl</span> in
your current directory; otherwise if you used the registry files above or used
the changing-the-memory-via-a-debugger-method described below, look for the
generated trace log files at the following locations:</span></b></p>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </b>%systemroot%\tracing\msv1_0&nbsp;
for NTLM</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; %<span class=SpellE>systemroot%\tracing\kerberos</span>&nbsp;
for Kerberos</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; %<span class=SpellE>systemroot%\tracing\kdcsvc</span>&nbsp;
for KDC</p>

<p>You can use these pre-prepared registry files provided by the security team
to stop the tracing:</p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><a href="\\lzhudbg\temp\regs\ntlmnotrace.reg">\\lzhudbg\temp\regs\ntlmnotrace.reg</a>
to stop NTLM tracing</p>

<p><a href="\\lzhudbg\temp\regs\kerbnotrace.reg">\\lzhudbg\temp\regs\kerbnotrace.reg</a>
to stop Kerberos tracing</p>

<p><a href="\\lzhudbg\temp\regs\kdcnotrace.reg">\\lzhudbg\temp\regs\kdcnotrace.reg</a>
to stop KDC tracing</p>

<p>&nbsp;</p>

</blockquote>

<p>Yet another way to start/stop tracing is via a debugger remote, here I show
an example, and you can get the idea. </p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>0:033&gt; x msv1_0!*<span class=SpellE>GlobalTraceControlBlock</span>*<br>
4d13d610 msv1_0!NtLmGlobalTraceControlBlock = <span style='color:blue'>000aa5d8</span><br>
<br>
0:033&gt; <span class=SpellE>dt</span> msv1_0!_DBG_TRACE_CONTROL_BLOCK <span
style='color:blue'>000aa5d8</span><br>
+0x000 Next : _LIST_ENTRY [ 0x900014 - 0xaa530 ]<br>
+0x008 Magic : _LARGE_INTEGER 6c727463`73797364<br>
<span style='color:blue'>+0x010</span><b> </b><span class=SpellE>TimeStamp</span>
: _LARGE_INTEGER 1c309be`c823fd10<br>
<span style='color:blue'>+0x018 </span><span class=SpellE>FlushTimerInterval</span>
: 3<br>
+0x01c <span class=SpellE>MofImageName</span> : _UNICODE_STRING
&quot;D:\WINDOWS\system32\msv1_0.dll&quot;<br>
+0x024 <span class=SpellE>TraceName</span> : _UNICODE_STRING &quot;msv1_0&quot;<br>
+0x030 <span class=SpellE>TraceSessionHandle</span> : 0<br>
+0x038 <span class=SpellE>TracePropSize</span> : 0<br>
+0x03c <span class=SpellE>TraceProp</span> : (null)<br>
+0x040 <span class=SpellE>SpyTraceSessionHandle</span> : 0<br>
+0x048 Level : 0<br>
+0x04c Flags : <span style='color:blue'>0</span><br>
+0x050 <span class=SpellE>ControlGuid</span> : _GUID
{5bbb6c18-aa45-49b1-a15f-085f7ed0aa90}<br>
+0x060 <span class=SpellE>SpyGuidRegistrationHandle</span> : 0<br>
+0x068 <span class=SpellE>TimerCallBack</span> : 0x4d137cd0
msv1_0!_DbgpTraceTimerCallback+0<br>
+0x06c <span class=SpellE>ControllerTimerCallback</span> : 0x4d137c30
msv1_0!_DbgpTraceControllerTi<br>
merCallback+0<br>
+0x070 <span class=SpellE>RegistryNotificationEventHandle</span> : 0x00000228<br>
+0x074 <span class=SpellE>RegistryNotificationWaitObjectHandle</span> :
0x000a3798<br>
+0x078 <span class=SpellE>ConfigRegKeyHandle</span> : 0x00000220<br>
+0x07c <span class=SpellE>ConfigValueName</span> : _UNICODE_STRING &quot;<span
class=SpellE>NtLmInfoLevel</span>&quot;<br>
+0x084 Lock : _RTL_CRITICAL_SECTION<br>
+0x09c <span class=SpellE>ModuleId</span> : 1<br>
0:033&gt; <span class=SpellE>ed</span> <span style='color:blue'>000aa5d8</span>+0x010
<b><span style='color:blue'>C</span></b>0015003 FFFFFFFF <span
style='color:blue'>// to enable tracing, flags 0x15003,&nbsp; <o:p></o:p></span></span></p>

<p><span style='font-size:10.0pt;color:blue'>The most significant byte here
means to spew to KD and use real-time tracing. For the second byte <b
style='mso-bidi-font-weight:normal'>0</b> means persisting to registry,
FFFFFFFF means not to persist.<o:p></o:p></span></p>

<p style='margin-left:-.5in'><b style='mso-bidi-font-weight:normal'><span
style='font-size:20.0pt;color:red'>Attention</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:16.0pt;color:red'>: </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:16.0pt;color:black'>In
KD, please use !<span class=SpellE>wmitrace.searchpath</span> to point the
kernel debugger to TMF files,</span></b><span style='font-size:10.0pt;
color:blue'> an example here is<span style='mso-spacerun:yes'>  </span>“!<span
class=SpellE>wmitrace.searchpath</span> </span><span style='font-size:10.0pt'>\\winbuilds\release\winmain\latest.tst\usa\x86fre\bin\symbols.pri<span
style='color:red'>\TraceFormat</span><span style='color:blue'>”, <o:p></o:p></span></span></p>

<p style='margin-left:-.5in'><span style='font-size:10.0pt;color:blue'>if you
have more than one path, you can separate them with semicolon, and you must
quote these paths and escape backslashes, an example for that is !<span
class=SpellE>wmitrace.searchpath</span> “z:\\lsa\\x86\\chk\\traceformat;c:\\temp\\tracceformat”.
Another way is to set environment variable TRACE_FORMAT_SEARCH_PATH using
semicolon as separators and you do not need to escape the backslashes.<o:p></o:p></span></p>

<p>Failing to do the step using &quot;!<span class=SpellE>wmitrace.searchpath</span>&quot;
above, you will see tracing entries in the debugger similar to the followings: </p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p class=MsoNormal><span style='mso-fareast-font-family:SimSun'>... <br>
Unknown( 16): GUID=97781080-d059-17fb-c744-2906e35f52c2 (No Format Information
found).<br>
Unknown( 30): GUID=2e97f161-e8df-8426-4158-b7f9ba10e4ff (No Format Information
found).<br>
Unknown( 37): GUID=2e97f161-e8df-8426-4158-b7f9ba10e4ff (No Format Information
found).<br>
Unknown( 10): GUID=85807d47-7d30-7734-dd0e-bfda9f362f2d (No Format Information
found).<br>
Unknown( 13): GUID=85807d47-7d30-7734-dd0e-bfda9f362f2d (No Format Information
found).<br>
... <o:p></o:p></span></p>

</blockquote>

<p class=MsoNormal><span style='font-size:15.0pt;mso-fareast-font-family:SimSun;
color:red'>Please look at <a href="#Can_you_please_give_me_instructions_how">section
5</a> for instructions how to decode the ETL log files into text files.</span><span
style='mso-fareast-font-family:SimSun'> <o:p></o:p></span></p>

</blockquote>

</blockquote>

<p>the following flags are defined in security\inc\<span class=SpellE>dsysdbg.h</span></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>#define DBG_FLAGS_CONTROL_MASK 0xF0000000 //
reserved for control purposes<br>
#define DBG_FLAGS_CONTROL_KD 0x80000000 // enable KD filter if KD is enabled<br>
#define DBG_FLAGS_CONTROL_RT 0x40000000 // enable <span class=SpellE>realtime</span><br>
&nbsp;</span></p>

</blockquote>

</blockquote>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3><a name="How_do_I_include_file_name,_function_na">2. How do I include the
symbolic names for the debugging flags, file name, function name, and line
number information in a trace statement</a></h3>

<div>

<p class=MsoNormal>Software Tracing already records the function, filename
&nbsp;and the source line number for you, its only a matter of displaying it.
Currently there are some restrictions in the display program which we are
working on so the line number can be displayed in a sort of funky way. </p>

</div>

<div>

<p class=MsoNormal>&nbsp; </p>

</div>

<div>

<p class=MsoNormal>Built in parameter 2 (%2) returns the string&nbsp; <span
class=SpellE>filenameNNN</span> Where the &quot;.&quot; in the filename is
replaced by a &quot;_&quot; and NNN is the line number. </p>

</div>

<div>

<p class=MsoNormal>&nbsp; </p>

</div>

<div>

<p class=MsoNormal>For example you might change your <span class=SpellE>userprefix</span>
before running <span class=SpellE>TraceFmt</span> </p>

</div>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<div>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>set
TRACE_FORMAT_PREFIX=&quot;[%9!d!]%8!04X!.%3!04X!::%4!s! [%1!s!<span
style='color:black'>]</span><span style='color:red'>(%!LEVEL!:%!FUNC!:%2!s!) </span><span
style='color:black'>&quot;</span></span><span style='color:blue'> <o:p></o:p></span></p>

</div>

</blockquote>

<div>

<p class=MsoNormal>where the part in <span style='color:red'>red</span> is the
addition to the default. <span style='mso-spacerun:yes'> </span>In this
example, <span style='color:red'>%!LEVEL! </span><span style='color:black'>gives
you the symbol name of the flags, such as “</span>Error”, or “Warning”; <span
style='color:red'>%!FUNC! </span><span style='color:black'>gives you the name
of the function that prints out traces,</span><span style='color:red'> </span><span
style='color:black'>and</span><span style='color:red'> %2!s! </span><span
style='color:black'>gives you the filename and line # where the trace was
printed out.</span></p>

</div>

<p>If you already have a debugger remote, in other words that the <span
style='font-size:10.0pt;font-family:Arial'>TRACE_FORMAT_PREFIX </span>was not
set before the debugger was started , you can use the &quot;!<span
class=SpellE>wmitrace.tfp</span> -p -s&quot; extension to set it up. Use
&quot;!<span class=SpellE>wmitrace.tfp</span> -?&quot; for more information,
note that the wmitrace.dll debugger extension should be in your latest debugger
package installed from http://dbg.</p>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3><a name="what_are_the_meanings/symbolic_names_fo">3. What are the
meanings/symbolic names for the debugging flags</a></h3>

<p>The meaning of the flags are component specific, and they are described in
the MOF file for each component and should be self-evident. Here I include a
few of them for your convenience.</p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p>[<span style='font-size:10.0pt'>Dynamic,<br>
&nbsp;&nbsp;&nbsp;&nbsp; Description(&quot;Security: NTLM Authentication&quot;)
: amended,<br>
&nbsp;&nbsp;&nbsp;&nbsp; <span class=SpellE>Guid</span>(&quot;{5BBB6C18-AA45-49b1-A15F-085F7ED0AA90}&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp; locale(&quot;MS\\0x409&quot;)]<br>
class MSV1_0DebugTrace : <span class=SpellE>EventTrace</span><br>
{<br>
&nbsp;&nbsp;&nbsp; [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Description (&quot;Enable
Flags&quot;) : amended,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueDescriptions</span>{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Error Flag&quot;, &quot;Warning Flag&quot;, &quot;Init Flag&quot;, &quot;<span
class=SpellE>Misc</span> Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Logon Session Flag&quot;, &quot;Leak Track Flag&quot;, &quot;<span
class=SpellE>Lpc</span> Flag&quot;, &quot;<span class=SpellE>Lpc</span> More
Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;<span class=SpellE>Api</span> Flag&quot;, &quot;<span class=SpellE>Api</span>
More Flag&quot;, &quot;Session Keys Flag&quot;, &quot;Negotiate Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Updates Flag&quot;, &quot;NTLM V2 Flag&quot;, &quot;Credentials
Flag&quot;, &quot;Protocol Version Flag&quot;, “Target Flag”} : amended,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Values{&quot;Error&quot;,
&quot;Warning&quot;, &quot;Init&quot;, &quot;<span class=SpellE>Misc</span>&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;<span class=SpellE>LogonSess</span>&quot;, &quot;Leak&quot;, &quot;<span
class=SpellE>Lpc</span>&quot;, &quot;<span class=SpellE>LpcMore</span>&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;<span class=SpellE>Api</span>&quot;, &quot;<span class=SpellE>ApiMore</span>&quot;,
&quot;<span class=SpellE>SKey</span>&quot;, &quot;<span class=SpellE>Nego</span>&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Updates&quot;, &quot;NtLmV2&quot;, &quot;<span class=SpellE>Cred</span>&quot;,
&quot;Version&quot;, ”Target”},<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueMap</span>{&quot;0x00000001&quot;,
&quot;0x00000002&quot;, &quot;0x00000004&quot;, &quot;0x00000008&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;0x00000010&quot;, &quot;0x00000020&quot;, &quot;0x00000040&quot;,
&quot;0x00000080&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;0x00000100&quot;, &quot;0x00000200&quot;, &quot;0x00000400&quot;,
&quot;0x00000800&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;0x00001000&quot;, &quot;0x00002000&quot;, &quot;0x00004000&quot;,
&quot;0x00008000&quot;, “0x00010000”} : amended<br>
&nbsp;&nbsp;&nbsp; ]<br>
<br>
&nbsp;&nbsp;&nbsp; uint32 Flags;<br>
};<o:p></o:p></span></p>

<p><span style='font-size:10.0pt'>[Dynamic,<br>
&nbsp;&nbsp;&nbsp;&nbsp; Description(&quot;Security: Kerberos
Authentication&quot;) : amended,<br>
&nbsp;&nbsp;&nbsp;&nbsp; <span class=SpellE>Guid</span>(&quot;{6B510852-3583-4e2d-AFFE-A67F9F223438}&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp; locale(&quot;MS\\0x409&quot;)]<br>
class <span class=SpellE>KerberosDebugTrace</span> : <span class=SpellE>EventTrace</span><br>
{<br>
[<br>
&nbsp;&nbsp;&nbsp; Description (&quot;Enable Flags&quot;) : amended,<br>
<br>
&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueDescriptions</span>{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Error
Flag&quot;, &quot;Warning Flag&quot;, &quot;Trace Flag&quot;, &quot;API
Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Credentials Flag&quot;, &quot;Context Flag&quot;, &quot;Logon Session
Flag&quot;, &quot;Referral Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Logon
Flag&quot;, &quot;KDC Flag&quot;, &quot;Context More Flag&quot;, &quot;Time
Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;User
Flag&quot;, &quot;Leaks Flag&quot;, &quot;Socket Flag&quot;, &quot;SPN cache
Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;S4U
Error Flag&quot;, &quot;S4U Trace Flag&quot;, &quot;Binding Cache Flag&quot;,
&quot;Loopback Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Ticket
Renewal Flag&quot;, &quot;U2U Flag&quot;} : amended,<br>
&nbsp;</span></p>

<p><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp; Values{&quot;Error&quot;,
&quot;Warning&quot;, &quot;Trace&quot;, &quot;API&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;<span class=SpellE>Cred</span>&quot;,
&quot;Context&quot;, &quot;<span class=SpellE>LSess</span>&quot;,
&quot;Referral&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Logon&quot;, &quot;KDC&quot;,
&quot;Context2&quot;, &quot;Time&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;User&quot;, &quot;Leaks&quot;,
&quot;Socket&quot;, &quot;<span class=SpellE>Spn</span>&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;S4uErr&quot;, &quot;S4U&quot;,
&quot;<span class=SpellE>Bnd</span>&quot;, &quot;Loopback&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Renew&quot;, &quot;U2U&quot;},<br>
<br>
&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueMap</span>{&quot;0x00000001&quot;,
&quot;0x00000002&quot;, &quot;0x00000004&quot;, &quot;0x00000008&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00000010&quot;, &quot;0x00000020&quot;,
&quot;0x00000040&quot;, &quot;0x00000080&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00000100&quot;, &quot;0x00000200&quot;,
&quot;0x00000400&quot;, &quot;0x00000800&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00001000&quot;,
&quot;0x00002000&quot;, &quot;0x00004000&quot;, &quot;0x00008000&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00010000&quot;,
&quot;0x00020000&quot;, &quot;0x00040000&quot;, &quot;0x00080000&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00100000&quot;, &quot;0x00200000&quot;} :
amended<br>
&nbsp;&nbsp;&nbsp; ]<br>
<br>
&nbsp;&nbsp;&nbsp; uint32 Flags;<br>
};</span></p>

<p><span style='font-size:10.0pt'>[Dynamic,<br>
&nbsp;&nbsp;&nbsp;&nbsp; Description(&quot;Security: KDC&quot;) : amended,<br>
&nbsp;&nbsp;&nbsp;&nbsp; <span class=SpellE>Guid</span>(&quot;{1BBA8B19-7F31-43c0-9643-6E911F79A06B}&quot;),<br>
&nbsp;&nbsp;&nbsp;&nbsp; locale(&quot;MS\\0x409&quot;)]<br>
class <span class=SpellE>KdcDebugTrace</span> : <span class=SpellE>EventTrace</span><br>
{<br>
[<br>
&nbsp;&nbsp;&nbsp; Description (&quot;Enable Flags&quot;) : amended,<br>
<br>
&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueDescriptions</span>{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;Error
Flag&quot;, &quot;Warning Flag&quot;, &quot;Trace Flag&quot;, &quot;<span
class=SpellE>Kdc</span> Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Tickets Flag&quot;, &quot;Domain Flag&quot;, &quot;Socket Flag&quot;,
&quot;Time Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;Transit Flag&quot;, &quot;Performance Flag&quot;, &quot;PKI Flag&quot;,
&quot;<span class=SpellE>Pheudo</span> API Flag&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&quot;User2User Flag&quot;, &quot;PAC Flag&quot;, &quot;Key Flag&quot;,
&quot;S4U Flag&quot;} : amended,<br>
<br>
&nbsp;&nbsp;&nbsp; Values{&quot;Error&quot;, &quot;Warning&quot;,
&quot;Trace&quot;, &quot;<span class=SpellE>Kdc</span>&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &quot;Tickets&quot;, &quot;Domain&quot;, &quot;Socket&quot;,
&quot;Time&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &quot;Transit&quot;, &quot;<span class=SpellE>Perf</span>&quot;,
&quot;PKI&quot;, &quot;PAPI&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; &quot;U2U&quot;, &quot;PAC&quot;, &quot;KEY&quot;,
&quot;S4U&quot;},<br>
<br>
&nbsp;&nbsp;&nbsp; <span class=SpellE>ValueMap</span>{&quot;0x00000001&quot;,
&quot;0x00000002&quot;, &quot;0x00000004&quot;, &quot;0x00000008&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00000010&quot;, &quot;0x00000020&quot;,
&quot;0x00000040&quot;, &quot;0x00000080&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00000100&quot;, &quot;0x00000200&quot;,
&quot;0x00000400&quot;, &quot;0x00000800&quot;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;0x00001000&quot;, &quot;0x00002000&quot;,
&quot;0x00004000&quot;, &quot;0x00008000&quot;} : amended<br>
&nbsp;&nbsp;&nbsp; ]<br>
<br>
&nbsp;&nbsp;&nbsp; uint32 Flags;<br>
};</span></p>

</blockquote>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3><a name="Can_I_start/stop_tracing_remotely">4. Can I start/stop tracing
remotely</a></h3>

<p>Yes, you can use logman.exe (should be on your machine at
%systemroot%system32\logman.exe). Just use the &quot;-s&quot; switch to supply
a machine name. </p>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3><a name="Can_you_please_give_me_instructions_how">5. Can you please give me
instructions how to decode the event trace log files</a></h3>

<h5><span style='font-size:12.0pt;font-weight:normal'>Sure, you need to find
out your symbols path first. Let's say your symbols are located at <u>\\winbuilds\release\winmain\latest.tst\usa\x86fre\bin\symbols.pri</u>
then</span></h5>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>tracefmt.exe -p </span><span
style='mso-spacerun:yes'> </span><span style='font-size:10.0pt'>\\winbuilds\release\winmain\latest.tst\usa\x86fre\bin\symbols.pri<span
style='color:red'>\TraceFormat </span>-display &lt;event trace log file
name&gt;</span></p>

</blockquote>

<p>You can get tracefmt.exe at <a href="\\lzhudbg\temp\tools\tracefmt.exe">\\lzhudbg\temp\tools\tracefmt.exe</a>.
This would display the data in your command window, but you can redirect it to
a file of your choice by using the &quot;&gt;&quot; operator, so that you can
review the output later on. </p>

<p>If you can not find the <span class=SpellE>TraceFormat</span> directory on
the release share (this can happen if the build came from a feature branch),
you can use tracepdb.exe (\\lzhudbg\temp\tools\tracepdb.exe) to generate the
TMF files from the PDB file. </p>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h3>6. <a name="What_should_I_do_if__I_have_cached_logon">What should I do
if&nbsp; I have cached logon issues</a></h3>

<h5 style='margin-left:.5in;text-indent:-.25in;mso-list:l4 level1 lfo5;
tab-stops:list .5in'><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol;font-weight:normal;
mso-bidi-font-weight:bold'><span style='mso-list:Ignore'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:12.0pt;font-weight:normal'>Please
copy <a href="\\lzhudbg\temp\tools\lscache.cmd">\\lzhudbg\temp\tools\lscache.cmd</a> and <a
href="\\lzhudbg\temp\tools\lscache.dll">\\lzhudbg\temp\tools\lscache.dll</a> locally to your
disk, and run <span class=SpellE>lscache.cmd</span>. What this does is to
extract the password verifiers from the registry and put them in a .log file in
addition to some subset of system information that allows me to identify your
system configurations. This would not comprise your password or any other
sensitive information and it is our strong commitment to promote privacy by
retrieving the minimal set of data from your system that is sufficient for the
diagnostic purposes. You can try to make sense of the .log file generated, if
not, send it to </span><span style='font-weight:normal'><a
href="mailto:lzhu@microsoft.com"><span style='font-size:12.0pt'>lzhu@microsoft.com</span></a></span></h5>

<ul type=disc>
 <li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
     mso-list:l4 level1 lfo5;tab-stops:list .5in'>Check for system logs in your
     event logs, more specifically event <st1:place w:st="on"><st1:City w:st="on">ID</st1:City>
      <st1:PostalCode w:st="on">45056</st1:PostalCode>, <st1:PostalCode w:st="on">45057</st1:PostalCode></st1:place>,
     and 45058, to see if any of the above exists. if so, you can try to make
     sense of it, it should be self-evident, otherwise, send the event texts
     and data to me.</li>
</ul>

<h5><a href="#top">Back to Top</a></h5>

<h3>7. <a name="How_do_I_get_Negotiate_Netlogon_NTLM_ker">How do I get
Negotiate/</a><span class=SpellE><span style='mso-bookmark:How_do_I_get_Negotiate_Netlogon_NTLM_ker'>Netlogon/NTLM/Kerbores/KDC</span></span><span
style='mso-bookmark:How_do_I_get_Negotiate_Netlogon_NTLM_ker'> traces on
2k/XP/2k3 systems</span>?</h3>

<p>If you have a NTLM auth failure using a domain account as the client, you
will almost always need to look at the <span class=SpellE>netlogon</span> log
on the server side.</p>

<p><b style='mso-bidi-font-weight:normal'><span style='color:red'>Unless
otherwise specified below, you are expected to run a registry file to enable
tracing, and you can repro the issue at hand, you will find the log files per
directions below. To clean up the debugger enabling, please just delete all the
registry keys and values that you used to enable tracing. <o:p></o:p></span></b></p>

<p><b style='mso-bidi-font-weight:normal'><span style='color:navy'>You can find
any below-mentioned registry file under</span><span style='color:red'> <a
href="\\lzhudbg\temp\regs"><span style='color:red'>\\lzhudbg\temp\regs</span></a><o:p></o:p></span></b>.</p>

<p><b style='mso-bidi-font-weight:normal'><span style='color:navy'>And you will
find any tools/exe under </span><span style='color:red'><a href="\\lzhudbg\temp\tools"><span
style='color:red'>\\lzhudbg\temp\tools</span></a></span><span
style='color:navy'>, Vista/LH server specific tools are under</span><span
style='color:red'> <a href="\\lzhudbg\temp\tools\lh">\\lzhudbg\temp\tools\lh</a><o:p></o:p></span></b>.</p>

<p>Requirements to obtain traces are summarized in the table.<o:p></o:p></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid black .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1'>
  <p align=center style='text-align:center'>components<o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border:solid black 1.0pt;
  border-left:none;mso-border-left-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-left-themecolor: text1'>
  <p align=center style='text-align:center'>2k<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border:solid black 1.0pt;
  border-left:none;mso-border-left-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-left-themecolor: text1'>
  <p align=center style='text-align:center'>XP/2k3<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border:solid black 1.0pt;
  border-left:none;mso-border-left-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-left-themecolor: text1'>
  <p align=center style='text-align:center'>Vista/longhorn</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-top-themecolor: text1'>
  <p>Negotiate/SPNEGO<o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Same as XP/2k3<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Checked build of lsasrv.dll is required</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\negodbg.reg"><span class=SpellE>negodbg.reg</span></a></p>
  <p>Reboot is required</p>
  <p>Spew is in KD/debugger and %windir%\system32\lsass.log<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Checked build NOT required</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\negotrace.reg"><span class=SpellE>Negotrace.reg</span></a>
  or</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\negodbg.reg"><span class=SpellE>Negodbg.reg</span></a>
  (Need reboot)</p>
  <p>Spew/tracing is in KD/debugger and %windir%\system32\lsass.log</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-top-themecolor: text1'>
  <p><span class=SpellE>Netlogon</span><o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Same as Vista/longhorn<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Same as Vista/longhorn<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Nltest.exe /DBFLAG:0x2000FFFF</p>
  <p>log is<span style='mso-spacerun:yes'>  </span>%<span class=SpellE>windir%\debug\netlogon.log</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-top-themecolor: text1'>
  <p>NTLM<o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Same as XP/2k3<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Checked build of msv1_0.dll is required</p>
  <p>Reboot is required</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\msvdbg.reg"><span class=SpellE>msvdbg.reg</span></a></p>
  <p>Spew is KD/debugger only<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>In an elevated admin CMD prompt run <a href="\\lzhudbg\temp\tools\tracing\startntlmtrace.cmd">\\lzhudbg\temp\tools\tracing\startntlmtrace.cmd</a></p>
  <p>The trace is in <span class=SpellE><span class=GramE>ntlm.etl</span></span><span
  class=GramE>,</span> convert it into TEXT according to <a
  href="#Can_you_please_give_me_instructions_how">section 5</a></p>
  <p><o:p>&nbsp;</o:p></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-top-themecolor: text1'>
  <p>Kerberos<o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Checked build of kerberos.dll is required</p>
  <p>Reboot is not required</p>
  <p>Registry File: <a href="\\lzhudbg\temp\regs\kerbloglevel.reg"><span class=SpellE>Kerbloglevel.reg</span></a></p>
  <p>Spew is in KD/debugger and %windir%\system32\lsass.log<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>No checked build is required and no reboot is required</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\kerbloglevel.reg"><span class=SpellE>Kerbloglevel.reg</span></a></p>
  <p>Spew is in KD/debugger and %windir%\system32\lsass.log<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>In an elevated admin CMD prompt run <a href="\\lzhudbg\temp\tools\tracing\startkerbtrace.cmd">\\lzhudbg\temp\tools\tracing\startkerbtrace.cmd</a></p>
  <p>The trace is in <span class=SpellE><span class=GramE>kerb.etl</span></span><span
  class=GramE>,</span> convert it into TEXT according to <a
  href="#Can_you_please_give_me_instructions_how">section 5</a></p>
  <p><span style='mso-bidi-font-size:10.0pt;mso-fareast-font-family:SimSun'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes'>
  <td width=139 valign=top style='width:104.1pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;mso-border-top-themecolor: text1'>
  <p>KDC<o:p></o:p></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Checked build of kdcsvc.dll is required</p>
  <p>Reboot is required</p>
  <p>Registry File: <a href="\\lzhudbg\temp\regs\kdcdbg.reg"><span class=SpellE>Kdcdbg.reg</span></a></p>
  <p>Spew is in KD/debugger/ and %windir%\system32\lsass.log<o:p></o:p></p>
  </td>
  <td width=222 valign=top style='width:166.5pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>Not reboot required, and no checked build required</p>
  <p>Registry file: <a href="\\lzhudbg\temp\regs\kdcdbg.reg"><span class=SpellE>Kdcdbg.reg</span></a></p>
  <p>Spew is in KD/debugger and %windir%\system32\lsass.log<o:p></o:p></p>
  </td>
  <td width=308 valign=top style='width:231.2pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt;mso-border-themecolor: text1;
  mso-border-left-themecolor: text1;mso-border-top-themecolor: text1;
  mso-border-bottom-themecolor: text1;mso-border-right-themecolor: text1'>
  <p>In an elevated admin CMD prompt run <a href="\\lzhudbg\temp\tools\tracing\startkdctrace.cmd">\\lzhudbg\temp\tools\tracing\startkdctrace.cmd</a></p>
  <p>The trace is in <span class=SpellE><span class=GramE>kdc.etl</span></span><span
  class=GramE>,</span> convert it into TEXT according to <a
  href="#Can_you_please_give_me_instructions_how">section 5</a></p>
  <p><o:p>&nbsp;</o:p></p>
  </td>
 </tr>
</table>

<h5><a href="#top">Back to Top</a></h5>

<div class=MsoNormal align=center style='text-align:center'>

<hr size=3 width="100%" align=center>

</div>

<h5>Larry Zhu<br>
Copyright © 2000<span class=GramE>&nbsp; [</span>Microsoft]. All rights
reserved.<br>
Revised: <!--webbot bot="TimeStamp" S-FORMAT="%B %d, %Y" S-TYPE="EDITED" startspan -->April 24, 2003<!--webbot bot="TimeStamp" i-checksum="17285" endspan -->.</h5>

</div>

</body>

</html>
